<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ title }}</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chroma-js/1.1.1/chroma.min.js"></script>
    <script>
        $(document).ready(function(){
            $(".att").each(function() {
                // var val = parseFloat($(this).text());
                var val = parseFloat($(this).attr("color")) * 100;
                var scale = chroma.scale(['white', 'red']);
                var color = scale(val).hex();
                $(this).attr("bgcolor", color);
            });
        })
    </script>
</head>
<style>
    table, th, td {border: 1px solid black}
</style>
<body>
    <h2>{{ title }}</h2>
    <table>
        <tr>
            <th>ID</th>
            <th>Question</th>
            <th>Paragraph</th>
        </tr>
        {% for row in rows %}
            <tr>
                <td>{{ row.id }}</td>
                <td>
                    {% for qj in row.ques %}
                        {{ qj }}
                    {% endfor %}
                </td>
                <td>
                    <table>
                    {% for xj, yj, ypj in zip(row.para, row.y, row.yp) %}
                        <tr>
                        {% for xjk, yjk, ypjk in zip(xj, yj, ypj) %}
                            <td class="att" color="{{ ypjk }}">
                            {% if yjk %}
                                <b>{{ xjk }}</b>
                            {% else %}
                                {{ xjk }}
                            {% endif %}
                            </td>
                        {% endfor %}
                        </tr>
                    {% endfor %}
                    </table>
                </td>
            </tr>
        {% endfor %}
    </table>
</body>
</html>